#set ($test = "works")

#macro( renderTableRows $color $somelist )
  #foreach( $something in $somelist )
      <tr><td bgcolor=$color>$something</td></tr>
  #end
#end

#set( $color = "yellow" )
<table>
    #renderTableRows( $color $request )
</table>

<script type="text/javascript">
    var myvar = "${test}";
    console.log(myvar)
</script>